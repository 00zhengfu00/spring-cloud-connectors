description = 'Spring Cloud Connectors Cloud Foundry Connector'

buildscript {
	repositories {
		jcenter()
	}
	dependencies {
		classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.3'
	}
}

apply plugin: 'com.github.johnrengelman.shadow'
apply from: "publish-maven.gradle"

ext {
	jsonVersion = "20171018"
}

dependencies {
	compile project(':spring-cloud-connectors-core')
	compile("org.json:json:$jsonVersion")
}

shadowJar {
	classifier = null
	dependencies {
		include dependency('org.json:json')
	}
	relocate 'org.json', 'org.springframework.cloud.cloudfoundry.org.json'
}

assemble.dependsOn shadowJar
install.dependsOn shadowJar

configurations {
	tests
}

task testJar(type: Jar) {
	classifier = 'tests'
	from sourceSets.test.output
}

build.dependsOn testJar

artifacts {
	tests testJar
	archives testJar
}
